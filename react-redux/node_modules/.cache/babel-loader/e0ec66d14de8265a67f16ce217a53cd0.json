{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\react_complete_information\\\\react-redux\\\\src\\\\cmp\\\\guard\\\\AuthGuard.jsx\",\n    _s = $RefreshSig$();\n\n// import {\n//   useAsync\n// } from \"react-async\";\n//\n// import {\n//   Outlet,\n//   Navigate\n// } from \"react-router\";\n// import Cookies from \"universal-cookie\";\n// import axios from \"axios\";\n// axios.defaults.baseURL = \"http://localhost:3434\";\n//\n// const verifyToken = async ({token})=>{\n//     try {\n//       const response = await axios({\n//         method: \"get\",\n//         url: \"/verify-token/\"+token\n//       })\n//       console.log(response)\n//       return response;\n//     } catch (err) {\n//       throw new Error(err);\n//     }\n// }\n//\n// const AuthGuard = ()=>{\n//   const cookie = new Cookies();\n//   const token = cookie.get(\"authToken\");\n//   const { data, error } = useAsync({\n//     promiseFn: verifyToken,\n//     token: token\n//   });\n//   console.log(data)\n//   if(data){\n//     console.log(data)\n//     return <Outlet />\n//   }\n//   if(error){\n//     return <Navigate to=\"/login\" />;\n//   }\n//   return null;\n// }\n// export default AuthGuard;\nimport { useEffect, useState } from \"react\";\nimport { Outlet, Navigate } from \"react-router\";\nimport Cookies from \"universal-cookie\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\naxios.defaults.baseURL = \"http://localhost:3434\";\n\nconst AuthGuard = () => {\n  _s();\n\n  const [login, setLogin] = useState(null);\n  useEffect(() => {\n    const req = async () => {\n      try {\n        const cookie = new Cookies();\n        const token = cookie.get(\"authToken\");\n        const res = await axios({\n          method: 'get',\n          url: '/verify-token/' + token\n        });\n        const user = JSON.stringify(res.data.data.data);\n        sessionStorage.setItem(\"user\", user);\n        setLogin(true);\n      } catch (err) {\n        setLogin(false);\n      }\n    };\n\n    req();\n  }, []);\n  if (login === null) return /*#__PURE__*/_jsxDEV(\"h1\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 29\n  }, this);\n  if (login === false) return /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/login\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 30\n  }, this);\n  if (login === true) return /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 29\n  }, this);\n};\n\n_s(AuthGuard, \"fRuISRGVIEhRh+dX3AE0vsr1XQ4=\");\n\n_c = AuthGuard;\nexport default AuthGuard;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthGuard\");","map":{"version":3,"names":["useEffect","useState","Outlet","Navigate","Cookies","axios","defaults","baseURL","AuthGuard","login","setLogin","req","cookie","token","get","res","method","url","user","JSON","stringify","data","sessionStorage","setItem","err"],"sources":["C:/Users/Admin/Desktop/react_complete_information/react-redux/src/cmp/guard/AuthGuard.jsx"],"sourcesContent":["// import {\r\n//   useAsync\r\n// } from \"react-async\";\r\n//\r\n// import {\r\n//   Outlet,\r\n//   Navigate\r\n// } from \"react-router\";\r\n// import Cookies from \"universal-cookie\";\r\n// import axios from \"axios\";\r\n// axios.defaults.baseURL = \"http://localhost:3434\";\r\n//\r\n// const verifyToken = async ({token})=>{\r\n//     try {\r\n//       const response = await axios({\r\n//         method: \"get\",\r\n//         url: \"/verify-token/\"+token\r\n//       })\r\n//       console.log(response)\r\n//       return response;\r\n//     } catch (err) {\r\n//       throw new Error(err);\r\n//     }\r\n// }\r\n//\r\n// const AuthGuard = ()=>{\r\n//   const cookie = new Cookies();\r\n//   const token = cookie.get(\"authToken\");\r\n//   const { data, error } = useAsync({\r\n//     promiseFn: verifyToken,\r\n//     token: token\r\n//   });\r\n//   console.log(data)\r\n//   if(data){\r\n//     console.log(data)\r\n//     return <Outlet />\r\n//   }\r\n//   if(error){\r\n//     return <Navigate to=\"/login\" />;\r\n//   }\r\n//   return null;\r\n// }\r\n// export default AuthGuard;\r\nimport { useEffect, useState } from \"react\";\r\nimport { Outlet, Navigate } from \"react-router\";\r\nimport Cookies from \"universal-cookie\";\r\nimport axios from \"axios\";\r\naxios.defaults.baseURL = \"http://localhost:3434\";\r\n\r\nconst AuthGuard = () => {\r\n  const [login, setLogin] = useState(null);\r\n\r\n  useEffect(()=>{\r\n    const req = async ()=>{\r\n      try {\r\n          const cookie = new Cookies();\r\n          const token = cookie.get(\"authToken\");\r\n          const res = await axios({\r\n            method: 'get',\r\n            url: '/verify-token/'+token\r\n          })\r\n          const user = JSON.stringify(res.data.data.data)\r\n          sessionStorage.setItem(\"user\",user)\r\n          setLogin(true)\r\n      }\r\n      catch(err)\r\n      {\r\n        setLogin(false);\r\n      }\r\n    }\r\n    req()\r\n  },[])\r\n\r\n  if(login === null) return <h1>Loading...</h1>\r\n\r\n  if(login === false) return <Navigate to=\"/login\" />\r\n\r\n  if(login === true) return <Outlet />\r\n};\r\n\r\nexport default AuthGuard;\r\n"],"mappings":";;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,MAAT,EAAiBC,QAAjB,QAAiC,cAAjC;AACA,OAAOC,OAAP,MAAoB,kBAApB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AACAA,KAAK,CAACC,QAAN,CAAeC,OAAf,GAAyB,uBAAzB;;AAEA,MAAMC,SAAS,GAAG,MAAM;EAAA;;EACtB,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBT,QAAQ,CAAC,IAAD,CAAlC;EAEAD,SAAS,CAAC,MAAI;IACZ,MAAMW,GAAG,GAAG,YAAU;MACpB,IAAI;QACA,MAAMC,MAAM,GAAG,IAAIR,OAAJ,EAAf;QACA,MAAMS,KAAK,GAAGD,MAAM,CAACE,GAAP,CAAW,WAAX,CAAd;QACA,MAAMC,GAAG,GAAG,MAAMV,KAAK,CAAC;UACtBW,MAAM,EAAE,KADc;UAEtBC,GAAG,EAAE,mBAAiBJ;QAFA,CAAD,CAAvB;QAIA,MAAMK,IAAI,GAAGC,IAAI,CAACC,SAAL,CAAeL,GAAG,CAACM,IAAJ,CAASA,IAAT,CAAcA,IAA7B,CAAb;QACAC,cAAc,CAACC,OAAf,CAAuB,MAAvB,EAA8BL,IAA9B;QACAR,QAAQ,CAAC,IAAD,CAAR;MACH,CAVD,CAWA,OAAMc,GAAN,EACA;QACEd,QAAQ,CAAC,KAAD,CAAR;MACD;IACF,CAhBD;;IAiBAC,GAAG;EACJ,CAnBQ,EAmBP,EAnBO,CAAT;EAqBA,IAAGF,KAAK,KAAK,IAAb,EAAmB,oBAAO;IAAA;EAAA;IAAA;IAAA;IAAA;EAAA,QAAP;EAEnB,IAAGA,KAAK,KAAK,KAAb,EAAoB,oBAAO,QAAC,QAAD;IAAU,EAAE,EAAC;EAAb;IAAA;IAAA;IAAA;EAAA,QAAP;EAEpB,IAAGA,KAAK,KAAK,IAAb,EAAmB,oBAAO,QAAC,MAAD;IAAA;IAAA;IAAA;EAAA,QAAP;AACpB,CA7BD;;GAAMD,S;;KAAAA,S;AA+BN,eAAeA,SAAf"},"metadata":{},"sourceType":"module"}